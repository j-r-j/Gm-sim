# Maestro E2E Test: Offseason Flow
# Tests all 12 offseason phases
#
# To run: maestro test .maestro/flows/offseason-flow.yaml

appId: com.gmsim.app

---
# Test: Complete Offseason Flow
# Prerequisites: Game in offseason phase

- launchApp
- tapOn: "Continue Game"

# === PHASE 1: SEASON RECAP ===
- assertVisible: "Season Recap"
- assertVisible: "Final Record"
- tapOn: "Continue"

# === PHASE 2: COACHING CHANGES ===
- assertVisible: "Coaching Staff"
- tapOn: "Continue"

# === PHASE 3: CONTRACT DECISIONS ===
- assertVisible: "Contract Decisions"
- tapOn: "Continue"

# === PHASE 4: COMBINE ===
- assertVisible: "NFL Combine"
- assertVisible: "Top Prospects"
- tapOn: "Continue"

# === PHASE 5: FREE AGENCY ===
- assertVisible: "Free Agency"
- assertVisible: "Cap Space"
- tapOn: "Continue"

# === PHASE 6: DRAFT ===
- assertVisible: "NFL Draft"
- tapOn: "Enter Draft Room"

# Draft room tested in separate flow - just verify we can enter
- assertVisible: "Round 1"
- tapOn: "Exit Draft"

# === PHASE 7: UDFA ===
- assertVisible: "Undrafted Free Agents"
- tapOn: "Continue"

# === PHASE 8: OTAs ===
- assertVisible: "OTAs"
- tapOn: "Continue"

# === PHASE 9: TRAINING CAMP ===
- assertVisible: "Training Camp"
- tapOn: "Continue"

# === PHASE 10: PRESEASON ===
- assertVisible: "Preseason"
- tapOn: "Simulate Preseason"

- extendedWaitUntil:
    visible: "Preseason Complete"
    timeout: 30000

- tapOn: "Continue"

# === PHASE 11: FINAL CUTS ===
- assertVisible: "Final Cuts"
- tapOn: "Continue"

# === PHASE 12: SEASON START ===
- assertVisible: "Season Start"
- assertVisible: "Week 1"
- tapOn: "Begin Season"

# Verify we're back at dashboard for new season
- assertVisible: "Week 1"
- assertVisible: "Play Week 1"
